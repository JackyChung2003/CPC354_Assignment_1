<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0" /> -->
    <title>3D Gasket TV Ident</title>

    <!-- WebGL Utilities -->

    <script type="text/javascript" src="Common/webgl-utils.js"></script>
    <script type="text/javascript" src="Common/initShaders.js"></script>
    <script type="text/javascript" src="Common/MV.js"></script>

    <!-- Link to Custom JS -->
    <script type="text/javascript" src="gasket-tv-ident.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" type="text/css" href="style.css" />

    <!-- Vertex Shader Section-->
    <script id="vertex-shader" type="x-shader/x-vertex">
      // Declare the global variable(s) for draw calls
      uniform mat4 projectionMatrix;
      uniform mat4 modelViewMatrix;

      // Declare the input variable(s) to receive per-vertex data from the application
      attribute vec4 vPosition;
      attribute vec4 vColor;
      attribute vec2 vTexCoord;

      uniform vec2 transform; // Transformation vector for movement

      // Declare the varying variable(s) to pass data to the fragment shader
      varying vec4 fColor;
      varying vec2 fTexCoord;

      void main()
      {
      	// gl_Position = projectionMatrix * modelViewMatrix * vPosition;
        gl_Position = projectionMatrix * modelViewMatrix * vec4(vPosition.xy + transform, vPosition.z, 1.0);
      	fColor = vColor;
      	fTexCoord = vTexCoord;
      }
    </script>

    <!-- Fragment Shader Section-->
    <script id="fragment-shader" type="x-shader/x-fragment">
      precision mediump float;

      varying vec4 fColor;  // Receive the color from the vertex shader and interpolate color with alpha
      varying vec2 fTexCoord;
      uniform sampler2D texture;

      void main()
      {
        // Sample texture color
        vec4 texColor = texture2D(texture, fTexCoord);
        vec4 blendedColor = fColor * texColor; // Multiply face color with texture color

        // If the alpha of the face is 0 (fully transparent), discard the fragment
        if (blendedColor.a == 0.0) {
            discard;
        }

        // Apply transparency by multiplying color and alpha
      	// gl_FragColor = fColor * texture2D(texture, fTexCoord);
        // gl_FragColor = vec4(fColor.rgb * texColor.rgb, fColor.a * texColor.a);

        // Blend the fragment's color with the background and back face
        //gl_FragColor = vec4(fColor.rgb * texColor.rgb, alpha);

        // Output the blended color
        gl_FragColor = blendedColor;
      }
    </script>
  </head>

  <body>
    <div class="whole-tv">
      <div class="antenna-container"></div>
      <div class="television-container">
        <div class="television-inner">
          <div class="television-screen-container">
            <div class="television-crt">
              <div class="television-screen">
                <!-- WebGL Canvas -->
                <canvas id="gl-canvas" width="640" height="360">
                  Error: your browser doesn't support the HTML5 canvas element
                </canvas>
                <img
                  id="texture-1"
                  src="https://i.postimg.cc/kMKrJd9B/BG001.jpg"
                  alt="texture 1"
                  crossorigin="anonymous"
                  hidden
                />
                <img
                  id="texture-2"
                  src="https://i.postimg.cc/vHgnmCxf/bricks.jpg"
                  alt="texture 2"
                  crossorigin="anonymous"
                  hidden
                />
                <img
                  id="texture-3"
                  src="https://i.postimg.cc/jdfgPn0g/dot-dot-pic.png"
                  alt="texture 3"
                  crossorigin="anonymous"
                  hidden
                />
              </div>
            </div>
          </div>
          <div class="television-lateral">
            <label for="wall-hit-count">Wall Hit Count:</label>
            <p id="wall-hit-count">0</p>
            <!-- <button id="toggle-sound-btn">Unmute Sound</button> -->

            <div class="sound-toggle">
              <!-- <input type="checkbox" id="sound-toggle-input" /> -->
              <input type="checkbox" id="sound-toggle-input" checked />
              <label for="sound-toggle-input" class="toggleSwitch">
                <div class="speaker">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    version="1.0"
                    viewBox="0 0 75 75"
                  >
                    <path
                      d="M39.389,13.769 L22.235,28.606 L6,28.606 L6,47.699 L21.989,47.699 L39.389,62.75 L39.389,13.769z"
                      style="
                        stroke: #fff;
                        stroke-width: 5;
                        stroke-linejoin: round;
                        fill: #fff;
                      "
                    ></path>
                    <path
                      d="M48,27.6a19.5,19.5 0 0 1 0,21.4M55.1,20.5a30,30 0 0 1 0,35.6M61.6,14a38.8,38.8 0 0 1 0,48.6"
                      style="
                        fill: none;
                        stroke: #fff;
                        stroke-width: 5;
                        stroke-linecap: round;
                      "
                    ></path>
                  </svg>
                </div>
                <div class="mute-speaker">
                  <svg
                    version="1.0"
                    viewBox="0 0 75 75"
                    stroke="#fff"
                    stroke-width="5"
                  >
                    <path
                      d="m39,14-17,15H6V48H22l17,15z"
                      fill="#fff"
                      stroke-linejoin="round"
                    ></path>
                    <path
                      d="m49,26 20,24m0-24-20,24"
                      fill="#fff"
                      stroke-linecap="round"
                    ></path>
                  </svg>
                </div>
              </label>
            </div>

            <!-- <div>
              <input
                type="radio"
                id="sound-kiu"
                name="wall-hit-sound"
                value="kiu-sound-single.mp3"
                checked
              />
              <label for="sound-kiu">Kiu Sound</label>
            </div>
            <div>
              <input
                type="radio"
                id="sound-bounce"
                name="wall-hit-sound"
                value="bouncing-sound-single.mp3"
              />
              <label for="sound-bounce">Bouncing Sound</label>
            </div>
            <div>
              <input
                type="radio"
                id="sound-punch"
                name="wall-hit-sound"
                value="punch-sound-single.mp3"
              />
              <label for="sound-punch">Punch Sound</label>
            </div> -->

            <div class="radio-input">
              <!-- Sound Choice -->
              <label class="label">
                <div class="back-side"></div>
                <input
                  type="radio"
                  id="sound-kiu"
                  name="sound-choice"
                  value="kiu-sound-single.mp3"
                  checked
                />
                <span class="text">Kiu</span>
                <span class="bottom-line"></span>
              </label>

              <label class="label">
                <div class="back-side"></div>
                <input
                  type="radio"
                  id="sound-bounce"
                  name="sound-choice"
                  value="bouncing-sound-single.mp3"
                />
                <span class="text">Bounce</span>
                <span class="bottom-line"></span>
              </label>

              <label class="label">
                <div class="back-side"></div>
                <input
                  type="radio"
                  id="sound-punch"
                  name="sound-choice"
                  value="punch-sound-single.mp3"
                />
                <span class="text">Punch</span>
                <span class="bottom-line"></span>
              </label>
            </div>

            <!-- Existing Audio Element -->
            <audio
              id="hit-sound"
              src="kiu-sound-single.mp3"
              preload="auto"
            ></audio>

            <div class="slider">
              Number of Subdivisions:
              <br />1<input
                id="subdiv-slider"
                type="range"
                min="1"
                max="5"
                value="3"
              />5
            </div>
            <div class="textbox">
              <p id="subdiv-value">3</p>
            </div>

            <label>Rotation Axis:</label>
            <!-- <div>
              <input type="radio" id="rotateX" name="rotation-axis" value="x" />
              <label for="rotateX">X</label>
              <input type="radio" id="rotateY" name="rotation-axis" value="y" />
              <label for="rotateY">Y</label>
              <input
                type="radio"
                id="rotateZ"
                name="rotation-axis"
                value="z"
                checked
              />
              <label for="rotateZ">Z</label>
            </div> -->
            <div class="radio-input">
              <label class="label">
                <div class="back-side"></div>
                <input
                  type="radio"
                  id="rotate-x"
                  name="rotation-axis"
                  value="x"
                />
                <span class="text">X</span>
                <span class="bottom-line"></span>
              </label>

              <label class="label">
                <div class="back-side"></div>
                <input
                  type="radio"
                  id="rotate-y"
                  name="rotation-axis"
                  value="y"
                />
                <span class="text">Y</span>
                <span class="bottom-line"></span>
              </label>

              <label class="label">
                <div class="back-side"></div>
                <input
                  type="radio"
                  id="rotate-z"
                  name="rotation-axis"
                  value="z"
                  checked
                />
                <span class="text">Z</span>
                <span class="bottom-line"></span>
              </label>
            </div>

            <label for="size-slider">Initial Size:</label>
            <div class="slider">
              Initial Size:
              <br />0.5<input
                id="size-slider"
                type="range"
                min="0.5"
                max="2"
                step="0.1"
                value="1.0"
              />2
            </div>
            <div class="textbox">
              <p id="size-value">1.0</p>
            </div>

            <!-- Speed Slider -->
            <label for="speed-slider">Speed:</label>
            <input id="speed-slider" type="range" min="1" max="10" value="1" />
            <span id="speed-value">1</span>x

            <!-- Background Color Picker -->
            <label for="bg-color">Background Color:</label>
            <input type="color" id="bg-color" value="#ffeb99" />

            <!-- Color and Opacity Controls -->
            <label>Face Colors:</label>
            <div>
              Face 1 Color:
              <input type="color" id="face1-color" value="#ff3333" /> Opacity:

              <div class="slider-group">
                <input
                  type="range"
                  id="face1-opacity"
                  min="0"
                  max="1"
                  step="0.1"
                  value="1"
                />
              </div>
            </div>
            <div>
              Face 2 Color:
              <input type="color" id="face2-color" value="#33ff33" /> Opacity:
              <input
                type="range"
                id="face2-opacity"
                min="0"
                max="1"
                step="0.1"
                value="1"
              />
            </div>
            <div>
              Face 3 Color:
              <input type="color" id="face3-color" value="#3333ff" /> Opacity:
              <input
                type="range"
                id="face3-opacity"
                min="0"
                max="1"
                step="0.1"
                value="1"
              />
            </div>
            <div>
              Face 4 Color:
              <input type="color" id="face4-color" value="#ffffff" /> Opacity:
              <input
                type="range"
                id="face4-opacity"
                min="0"
                max="1"
                step="0.1"
                value="1"
              />
            </div>

            <!-- Radio buttons for for textures -->
            <!-- <div class="checkText">Enable Texture 1</div>
            <input
              class="checkRadio"
              id="check-texture-1"
              type="radio"
              name="radio"
              checked
            />

            <div class="checkText">Enable Texture 2</div>
            <input
              class="checkRadio"
              id="check-texture-2"
              type="radio"
              name="radio"
            />

            <div class="checkText">Enable Texture 3</div>
            <input
              class="checkRadio"
              id="check-texture-3"
              type="radio"
              name="radio"
            /> -->

            <div class="radio-input">
              <label class="label">
                <div class="back-side"></div>
                <input
                  type="radio"
                  id="check-texture-1"
                  name="texture-choice"
                  value="1"
                  checked
                />
                <span class="text">Texture 1</span>
                <span class="bottom-line"></span>
              </label>

              <label class="label">
                <div class="back-side"></div>
                <input
                  type="radio"
                  id="check-texture-2"
                  name="texture-choice"
                  value="2"
                />
                <span class="text">Texture 2</span>
                <span class="bottom-line"></span>
              </label>

              <label class="label">
                <div class="back-side"></div>
                <input
                  type="radio"
                  id="check-texture-3"
                  name="texture-choice"
                  value="3"
                />
                <span class="text">Texture 3</span>
                <span class="bottom-line"></span>
              </label>
            </div>

            <!-- Toggles -->
            <div>
              <input type="checkbox" id="toggle-wall-color" />
              <label for="toggle-wall-color">Hit Wall & Random Color</label>
            </div>
            <div>
              <input type="checkbox" id="toggle-wall-random-movement" />
              <label for="toggle-wall-random-movement"
                >Hit Wall & Random Movement</label
              >
            </div>
            <div>
              <input type="checkbox" id="toggle-wall-vibrate" />
              <label for="toggle-wall-vibrate">Hit Wall & Vibration</label>
            </div>
          </div>
        </div>

        <div class="buttons">
          <button id="power-button">Power</button>
          <button id="save-settings-btn">Save Settings</button>
          <button id="load-settings-btn">Load Settings</button>
          <button id="start-animation-btn">Start</button>
          <button id="reset-gasket-btn">Reset Gasket</button>
          <button id="reset-settings-btn">Reset All Settings</button>

          <input type="file" id="file-input" style="display: none" />
        </div>
      </div>
    </div>
  </body>
</html>

<!-- <audio id="hit-sound" src="bouncing-sound-single.mp3" preload="auto"></audio> -->
<!-- <audio id="hit-sound" src="punch-sound-single.mp3" preload="auto"></audio> -->
<!-- <audio id="hit-sound" src="kiu-sound-single.mp3" preload="auto"></audio> -->
